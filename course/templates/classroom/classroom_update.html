{% extends "base_generic.html" %}
{% load i18n %}
{% load widget_tweaks %}
{% block content %}
    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                    <div class="card-body">

                        <h5 class="card-title">{% trans "Classroom Update" %}</h5>

                        <hr>

                        {% if user.is_superuser or user in classroom.discipline.discipline_coords.all or user in classroom.classroom_profs.all %}

                            <div class="mb-4">
                                <h5>{% trans "Include multiple Students from a CSV file" %}</h5>

                                <form action="import/" method="POST" enctype="multipart/form-data" class="mb-3">
                                    {% csrf_token %}

                                    <label for="myfileStudents" class="form-label small mb-1">
                                        {% trans "Choose CSV file" %}
                                    </label>

                                    <div class="input-group input-group-sm">
                                        <input type="file" class="form-control" name="myfileClassrooms" id="myfileStudents" accept=".csv" required>
                                        <button class="btn btn-primary" type="submit">
                                            {% trans "Upload-Students" %}
                                        </button>
                                    </div>
                                </form>

                                <div class="card bg-light">
                                    <div class="card-body p-3">
                                        <h6 class="card-title mb-1">{% trans "CSV Syntax" %}</h6>

                                        <div class="small text-muted mb-2">
                                            {% trans "Separators" %}: <b>;</b> {% trans "or" %} <b>,</b>
                                            <span class="mx-2">|</span>
                                            {% trans "Encoding" %}: <b>UTF-8</b> {% trans "or" %} <b>Latin-1</b>
                                        </div>

                                        <pre class="border p-2 bg-white text-dark mb-0" style="font-size: 0.85em; line-height: 1.3;">
<b>ID; {% trans "Name" %}; Email</b>
112018123; Jo√£o da Silva; joao@aluno.ufabc.edu.br
112019456, Maria Campos, maria@gmail.com</pre>
                                    </div>
                                </div>

                            </div>

                            <hr>

                            <form method="post">
                                {% csrf_token %}

                                <div class="alert alert-info shadow-sm mb-4" role="alert">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-lightbulb fa-2x mr-3"></i>
                                        <div>
                                            <h6 class="alert-heading font-weight-bold mb-1">{% trans "Efficiency Type" %}</h6>
                                            <p class="mb-0 small">
                                                {% trans "The most efficient way to add students is via" %}
                                                <b>{% trans "CSV Import" %}</b>.
                                                {% trans "The selection fields below are intended primarily for verification or minor adjustments." %}
                                                <br>
                                                {% trans "Manual selection is not recommended for large classes." %}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- discipline -->
                                <div class="btn-group-vertical">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Choose Discipline" %}</span>
                                    </div>
                                    {% render_field form.discipline class+="form-control" %}
                                </div>

                                <!-- students -->
                                <div class="btn-group-vertical">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Students" %}</span>
                                    </div>
                                    {% render_field form.students class+="form-control" %}
                                </div>

                                <!-- classroom_profs -->
                                <div class="btn-group-vertical">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Profs" %}</span>
                                    </div>
                                    {% render_field form.classroom_profs class+="form-control" %}
                                    <p>{% trans "If you are not the course coordinator, to include students you must choose at least one teacher from the class" %}<br>
                                        {% trans "Search with CTRL+F" %}
                                        - {% trans "Hold CTRL to mark more than one teacher" %}</p>
                                </div>

                                <!-- classroom_code -->
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Code" %}</span>
                                    </div>
                                    {% render_field form.classroom_code class+="form-control" placeholder=form.course_name.help_text %}
                                </div>

                                <!-- classroom_room -->
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Room" %}</span>
                                    </div>
                                    {% render_field form.classroom_room class+="form-control" placeholder=form.course_code.help_text %}
                                </div>

                                <!-- Creation Period -->
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Period" %} ({% trans "Format" %}: 2023.3)</span>
                                    </div>
                                    {% render_field form.classroom_days class+="form-control" placeholder=form.course_code.help_text %}
                                </div>

                                <!-- classroom_type -->
                                <div class="btn-group-vertical">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">{% trans "Type" %}</span>
                                    </div>
                                    {% render_field form.classroom_type class+="form-control" %}
                                </div>
                                <p></p>


                                <hr>

                                <!-- Actions -->
                                <div class="text-right">
                                    <a href="{% url 'course:classroom-mylist' %}"
                                       class="btn btn-outline-primary">{% trans "Back" %}</a>
                                    <button class="btn btn-primary">{% trans "Save" %}</button>
                                </div>
                            </form>

                        {% endif %}

                        <hr>
                        {% trans "Only teacher registered in classroom or coordenator" %}<br>
                        {% trans "Contact your discipline coordinator" %}                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}